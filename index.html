<html>
	<head>
		<title>
			Dyna Search Engine
		</title>
		<style>
h1 {
	text-align: center;
	justify-content: center;
}

.container {
	display: flex;
	justify-content: center;
	align-items: center;
}
		</style>
		<script>
			function query_send() {
				let url = "http://localhost:8080";
				let dom_node = document.getElementById("searchbar");
				let result_node = document.getElementById("results")
				let query = dom_node.value;

				let formatted_url = new URL(url);
				formatted_url.searchParams.set("query", query);

				fetch(formatted_url.toString(), {
					mode: 'cors',
					headers: {
						'Access-Control-Allow-Origin': '*',
						'Access-Control-Allow-Headers': '*',
					}
				})
					.then(res => res.text())
					.then(res => {
						let res_obj = JSON.parse(res);
						console.log(res_obj);

						let output_html = "";
						for (const [key, val] of Object.entries(res_obj)) {
							console.log(key);
							let anchor_tags = `<a href=\"file://${key}\">${key}</a><br>`;
							output_html = output_html.concat(anchor_tags);
						}
						console.log(output_html);
						result_node.innerHTML = output_html;
					})
					.catch(e => {result_node.innerText = e});
			}
		</script>
	</head>
	<body>
		<h1>
			Dyna - Local Search Engine
		</h1>

		<div class="container">
			<input id="searchbar" type="text"/>
			<button onclick="query_send()">ï€‚</button>
		</div>

		<div id="results">
		</div>
	</body>
</html>
